<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>æ°¢èƒ½ä¸‰ç»´è·ƒè¿çŸ¥è¯†å›¾è°± ğŸŒğŸ”‹</title>
    <script src="https://d3js.org/d3.v7.min.js "></script> <!-- ä¿®å¤CDNé“¾æ¥ -->
    <style>
        body {
            background: linear-gradient(135deg, #000c3c, #00331a);
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        svg {
            width: 100vw;
            height: 100vh;
        }
        .link {
            stroke: #999;
            stroke-opacity: 0.6;
            stroke-width: 1.5px;
        }
        .node {
            cursor: pointer;
        }
        .label {
            font: 12px sans-serif;
            pointer-events: none;
            fill: white;
        }
        .legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border-radius: 8px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            margin: 5px 0;
        }
        .color-box {
            width: 12px;
            height: 12px;
            margin-right: 8px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <!-- å›¾ä¾‹ -->
    <div class="legend">
        <div class="legend-item"><div class="color-box" style="background:#00f2ff"></div> æŠ€æœ¯ç»´åº¦</div>
        <div class="legend-item"><div class="color-box" style="background:#00cc88"></div> äº§ä¸šç»´åº¦</div>
        <div class="legend-item"><div class="color-box" style="background:#cc66cc"></div> åˆ¶åº¦ç»´åº¦</div>
        <div class="legend-item"><div class="color-box" style="background:#ff9900"></div> åº”ç”¨åœºæ™¯</div>
    </div>

    <!-- SVGå®¹å™¨ -->
    <svg></svg>

    <script>
        // æ•°æ®å®šä¹‰
        const data = {
            nodes: [
                // ç»´åº¦èŠ‚ç‚¹ï¼ˆå¢å¼ºæƒé‡ï¼‰
                {id: "æŠ€æœ¯ç»´åº¦", group: "dimension", weight: 3},
                {id: "äº§ä¸šç»´åº¦", group: "dimension", weight: 3},
                {id: "åˆ¶åº¦ç»´åº¦", group: "dimension", weight: 3},

                // æŠ€æœ¯èŠ‚ç‚¹
                {id: "æ— é“‚ç”µå †é‡äº§", group: "technology"},
                {id: "å›ºæ€å‚¨æ°¢çªç ´", group: "technology"},
                {id: "SOECç”µè§£æ§½", group: "technology"},
                {id: "IVå‹å‚¨æ°¢ç“¶", group: "technology"},
                {id: "æ°¢ç”µäº’è¡¥æŠ€æœ¯", group: "technology"},

                // äº§ä¸šèŠ‚ç‚¹
                {id: "æ°¢èƒ½é‡å¡æ¸—é€", group: "industry"},
                {id: "è¾“æ°¢ç®¡é“ç½‘ç»œ", group: "industry"},
                {id: "åŠ æ°¢ç«™å»ºè®¾", group: "industry"},
                {id: "è½¦ç½‘äº’åŠ¨", group: "industry"},
                {id: "æ°¢èƒ½æ¸¯å£", group: "industry"},

                // åˆ¶åº¦èŠ‚ç‚¹
                {id: "ç¢³ç¨æœºåˆ¶", group: "policy"},
                {id: "æ ‡å‡†äº’è®¤", group: "policy"},
                {id: "ç»¿æ°¢è¡¥è´´", group: "policy"},
                {id: "ç¢³äº¤æ˜“å¸‚åœº", group: "policy"},
                {id: "è·¨çœé…é¢", group: "policy"},

                // åº”ç”¨åœºæ™¯
                {id: "å±±ä¸œé‡å¡", group: "scenario"},
                {id: "é•¿ä¸‰è§’é›†ç¾¤", group: "scenario"},
                {id: "å¼ å®¶å£å†¬å¥¥", group: "scenario"},
                {id: "ä¸Šæµ·æ¸¯è¿è¾“", group: "scenario"}
            ],
            links: [
                // ç»´åº¦å…³è”ï¼ˆåŒå‘ï¼‰
                {source: "æŠ€æœ¯ç»´åº¦", target: "äº§ä¸šç»´åº¦", value: 3},
                {source: "äº§ä¸šç»´åº¦", target: "åˆ¶åº¦ç»´åº¦", value: 3},
                {source: "åˆ¶åº¦ç»´åº¦", target: "æŠ€æœ¯ç»´åº¦", value: 3},

                // æŠ€æœ¯ç»´åº¦å…³è”
                {source: "æŠ€æœ¯ç»´åº¦", target: "æ— é“‚ç”µå †é‡äº§"},
                {source: "æŠ€æœ¯ç»´åº¦", target: "å›ºæ€å‚¨æ°¢çªç ´"},
                {source: "æŠ€æœ¯ç»´åº¦", target: "SOECç”µè§£æ§½"},
                {source: "æŠ€æœ¯ç»´åº¦", target: "IVå‹å‚¨æ°¢ç“¶"},
                {source: "æŠ€æœ¯ç»´åº¦", target: "æ°¢ç”µäº’è¡¥æŠ€æœ¯"},

                // äº§ä¸šç»´åº¦å…³è”
                {source: "äº§ä¸šç»´åº¦", target: "æ°¢èƒ½é‡å¡æ¸—é€"},
                {source: "äº§ä¸šç»´åº¦", target: "è¾“æ°¢ç®¡é“ç½‘ç»œ"},
                {source: "äº§ä¸šç»´åº¦", target: "åŠ æ°¢ç«™å»ºè®¾"},
                {source: "äº§ä¸šç»´åº¦", target: "è½¦ç½‘äº’åŠ¨"},
                {source: "äº§ä¸šç»´åº¦", target: "æ°¢èƒ½æ¸¯å£"},

                // åˆ¶åº¦ç»´åº¦å…³è”
                {source: "åˆ¶åº¦ç»´åº¦", target: "ç¢³ç¨æœºåˆ¶"},
                {source: "åˆ¶åº¦ç»´åº¦", target: "æ ‡å‡†äº’è®¤"},
                {source: "åˆ¶åº¦ç»´åº¦", target: "ç»¿æ°¢è¡¥è´´"},
                {source: "åˆ¶åº¦ç»´åº¦", target: "ç¢³äº¤æ˜“å¸‚åœº"},
                {source: "åˆ¶åº¦ç»´åº¦", target: "è·¨çœé…é¢"},

                // æŠ€æœ¯-äº§ä¸šå…³è”
                {source: "æ— é“‚ç”µå †é‡äº§", target: "æ°¢èƒ½é‡å¡æ¸—é€", value: 2},
                {source: "å›ºæ€å‚¨æ°¢çªç ´", target: "è¾“æ°¢ç®¡é“ç½‘ç»œ", value: 2},
                {source: "SOECç”µè§£æ§½", target: "åŠ æ°¢ç«™å»ºè®¾", value: 2},
                {source: "IVå‹å‚¨æ°¢ç“¶", target: "è½¦ç½‘äº’åŠ¨", value: 2},

                // äº§ä¸š-åˆ¶åº¦å…³è”
                {source: "æ°¢èƒ½é‡å¡æ¸—é€", target: "ç¢³ç¨æœºåˆ¶", value: 2},
                {source: "è¾“æ°¢ç®¡é“ç½‘ç»œ", target: "æ ‡å‡†äº’è®¤", value: 2},
                {source: "åŠ æ°¢ç«™å»ºè®¾", target: "ç»¿æ°¢è¡¥è´´", value: 2},
                {source: "è½¦ç½‘äº’åŠ¨", target: "ç¢³äº¤æ˜“å¸‚åœº", value: 2},

                // åœºæ™¯å…³è”
                {source: "å±±ä¸œé‡å¡", target: "æ°¢èƒ½é‡å¡æ¸—é€", value: 1.5},
                {source: "é•¿ä¸‰è§’é›†ç¾¤", target: "è¾“æ°¢ç®¡é“ç½‘ç»œ", value: 1.5},
                {source: "å¼ å®¶å£å†¬å¥¥", target: "è½¦ç½‘äº’åŠ¨", value: 1.5},
                {source: "ä¸Šæµ·æ¸¯è¿è¾“", target: "æ°¢èƒ½æ¸¯å£", value: 1.5}
            ]
        };

        // SVGåˆå§‹åŒ–
        const width = window.innerWidth;
        const height = window.innerHeight;
        const svg = d3.select("svg")
            .attr("viewBox", [0, 0, width, height])
            .attr("preserveAspectRatio", "xMidYMid meet");

        // åŠ›æ¨¡æ‹Ÿä¼˜åŒ–
        const simulation = d3.forceSimulation(data.nodes)
            .force("link", d3.forceLink().id(d => d.id).distance(d => d.value ? d.value * 40 : 80))
            .force("charge", d3.forceManyBody().strength(-120).distanceMax(300))
            .force("center", d3.forceCenter(width/2, height/2))
            .force("collision", d3.forceCollide().radius(30).strength(0.8));

        // åˆ›å»ºè¿çº¿
        const link = svg.append("g")
            .selectAll("line")
            .data(data.links)
            .enter().append("line")
            .attr("class", "link")
            .attr("stroke-width", d => Math.max(1, d.value));

        // åˆ›å»ºèŠ‚ç‚¹
        const node = svg.append("g")
            .selectAll("circle")
            .data(data.nodes)
            .enter().append("circle")
            .attr("r", d => d.weight ? d.weight * 8 : 6)
            .attr("fill", d => getColor(d.group))
            .call(drag(simulation))
            .on("click", (event, d) => {
                alert(`èŠ‚ç‚¹ä¿¡æ¯ï¼š\n${d.id}\nç±»å‹ï¼š${d.group}`);
            });

        // åˆ›å»ºæ ‡ç­¾
        const labels = svg.append("g")
            .selectAll("text")
            .data(data.nodes)
            .enter().append("text")
            .text(d => d.id)
            .attr("class", "label")
            .attr("dx", 15)
            .attr("dy", 5);

        // åˆå§‹åŒ–ä½ç½®
        simulation.on("tick", () => {
            link.attr("x1", d => d.source.x)
                .attr("y1", d => d.source.y)
                .attr("x2", d => d.target.x)
                .attr("y2", d => d.target.y);

            node.attr("cx", d => d.x)
                .attr("cy", d => d.y);

            labels.attr("x", d => d.x)
                  .attr("y", d => d.y);
        });

        // é¢œè‰²æ˜ å°„
        function getColor(group) {
            return {
                "dimension": "#cc66cc",
                "technology": "#00f2ff",
                "industry": "#00cc88",
                "policy": "#cc66cc",
                "scenario": "#ff9900"
            }[group] || "#FFA07A";
        }

        // æ‹–æ‹½äº¤äº’
        function drag(simulation) {
            return d3.drag()
                .on("start", (event, d) => {
                    if (!event.active) simulation.alphaTarget(0.3).restart();
                    d.fx = d.x;
                    d.fy = d.y;
                })
                .on("drag", (event, d) => {
                    d.fx = event.x;
                    d.fy = event.y;
                })
                .on("end", (event, d) => {
                    d.fx = null;
                    d.fy = null;
                });
        }
    </script>
</body>
</html>